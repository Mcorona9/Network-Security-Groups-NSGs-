
<p align="center">
<img src="https://i.imgur.com/Ua7udoS.png" alt="Traffic Examination"/>
</p>

<h1>Network Security Groups (NSGs) and Inspecting Traffic Between Azure Virtual Machines</h1>
In this tutorial, we observe various network traffic to and from Azure Virtual Machines with Wireshark as well as experiment with Network Security Groups. <br />




<h2>Environments and Technologies Used</h2>

- Microsoft Azure (Virtual Machines)
- Remote Desktop
- Various Command-Line Tools
- Various Network Protocols (SSH, RDH, DNS, HTTP/S, ICMP)
- Wireshark (Protocol Analyzer)

<h2>Operating Systems Used </h2>

- Windows 10 (21H2)
- Ubuntu Server 20.04

<h2>Actions and Observations</h2>

<p>
<img src="https://i.imgur.com/upyqEZc.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
As our initial action, we intend to generate a pair of virtual machines, each running a different operating system. One virtual machine will utilize the Microsoft operating system, while the other will run on the Linux operating system.
</p>
<br />



<p>
<img src="https://i.imgur.com/WIqmHHm.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
Once we have successfully created the two virtual machines, we can take advantage of the Network Watcher Topology feature to monitor and analyze the network connections between the VMs that are connected to the same virtual network. Additionally, this feature allows us to gain a holistic view of the entire environment, including other virtual machines, network security groups, and virtual network gateways that are connected to the same network.
</p>
<br />

<p>
<img src="https://i.imgur.com/2VKzwU3.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
For the third step, our plan is to remotely connect to VM1 and install Wireshark, a powerful network protocol analyzer, from within the virtual machine. The primary objective of this step is to allow us to examine the network traffic flowing between the two virtual machines, providing us with an in-depth understanding of the communication protocols that are being used. With Wireshark installed, we will be able to capture, analyze, and interpret network data packets in real-time, enabling us to troubleshoot and optimize our network performance, as well as identify potential security threats or vulnerabilities. 
</p>
<br />

<p>
<img src="https://i.imgur.com/2RtuDIk.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
The image above illustrates that Wireshark has been successfully installed on VM1, and we can see that there is already network activity being monitored within the application. 
</p>
<br />

<p>
<img src="https://i.imgur.com/5WrdQTY.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
Our next task is to retrieve the private IP address of VM2 and utilize PowerShell from within VM1 to initiate a ping request to that IP address. The purpose of this step is to establish a network connection between the two virtual machines and confirm that they are able to communicate with each other. The image provided above displays the resulting network traffic generated by the ping command. As we can observe from the image, there are two distinct IP addresses involved in the communication, one representing VM1 and the other representing VM2. This traffic flow is an indication that the two virtual machines are successfully connected and able to exchange data packets. 
</p>
<br />

<p>
<img src="https://i.imgur.com/q6bIGkq.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
In this section, we have started a continuous ping by using the "-t" command and specifying the private IP address of VM2. The purpose of this step is to ensure a constant flow of traffic between the two virtual machines, which will aid in our troubleshooting efforts. In the next step, we will be modifying the firewall settings of VM2 to block incoming traffic using the ICMP protocol. Specifically, we will be preventing any new ping requests from being initiated towards VM2. This will allow us to test the effectiveness of the firewall settings and ensure that incoming traffic is being blocked as intended.
</p>
<br />

<p>
<img src="https://i.imgur.com/pt0dQSA.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
After modifying the firewall settings in VM2 to block incoming traffic using the ICMP protocol, we can now observe that the continuous ping from VM1 has come to a stop. This confirms that the firewall is functioning as intended, and incoming traffic using the specified protocol is now being blocked. This is a critical step in ensuring the security and integrity of our virtual environment and protecting it against potential threats and vulnerabilities. By successfully blocking incoming traffic, we can safeguard our network and data from malicious attacks and unauthorized access. With the firewall settings in place, we can continue our exploration of the virtual environment with greater confidence and peace of mind.
</p>
<br />

<p>
<img src="https://i.imgur.com/2dmPV0d.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
</p>
<p>
In this section, we will be using the SSH command in PowerShell to establish a remote connection to VM2 from VM1. This will allow us to access and modify the settings and configurations of VM2 from a remote location. SSH is a secure protocol that provides encrypted communication between two systems, making it an ideal choice for remote access and administration. 
</p>
<br />

